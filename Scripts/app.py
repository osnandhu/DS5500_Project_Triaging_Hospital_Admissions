from flask import Flask, jsonify, request
from flask_restful import Api, Resource, reqparse
import json
import numpy as np
import pandas as pd
import pickle
from sklearn.ensemble import RandomForestClassifier
from xgboost import XGBClassifier


app = Flask(__name__)
api = Api(app)

users = [{"name": "EDNurse", "age": 42, "occupation": "ED Nurse"}]

meta_data = {
    "meds_diagnostic": 0,
    "meds_unclassifieddrugproducts": 0,
    "neutrophils_min": 748,
    "temp_max": 131,
    "anc(absneutrophilcount)_last": 457,
    "urineculture,routine_count": 0,
    "d-dimer_min": 1017,
    "wbc_median": 885,
    "calculatedhco3(poc)i_median": 792,
    "po2(poc)_median": 324,
    "arrivalday": 2,
    "mpv_min": 141,
    "pocbun_median": 291,
    "meds_immunosuppressants": 0,
    "meds_diuretics": 0,
    "pocionizedcalcium_median": 99,
    "ph,venous(poc)_median": 135,
    "sbp_median": 330,
    "potassium_last": 82,
    "albumin_last": 56,
    "rbc_last": 322,
    "poctroponini._last": 42,
    "temp_min": 141,
    "mchc_last": 157,
    "religion": 3,
    "rbc/hpf_median": 1133,
    "co2_min": 355,
    "magnesium_max": 51,
    "pocionizedcalcium_min": 64,
    "alkphos_median": 1105,
    "pocionizedcalcium_max": 64,
    "meds_sedative/hypnotics": 0,
    "troponini(poc)_max": 403,
    "arrivalmode": 6,
    "meds_antiasthmatics": 0,
    "basosabs_median": 185,
    "otherus_count": 0,
    "pocph_median": 272,
    "leukocytesua_count": 0,
    "meds_colonystimulatingfactors": 0,
    "ethnicity": 1,
    "o2satcalculated,venous(poc)_median": 268,
    "age": 60,
    "eosinoabs_min": 36,
    "wbc_last": 614,
    "mri_count": 0,
    "headct_count": 0,
    "globulin_median": 149,
    "poctroponini._median": 54,
    "calculatedco2(poc)_median": 99,
    "hemoglobin_last": 191,
    "lymphs_median": 1189,
    "immaturegrans(abs)_min": 26,
    "proteintotal_min": 99,
    "phosphorus_max": 138,
    "hco3calculated,venous(poc)_min": 401,
    "mcv_max": 598,
    "sbp_min": 111,
    "spo2_max": 98,
    "po2,venous(poc)_median": 283,
    "pocpotassium_min": 72,
    "monocytes_min": 254,
    "b-typenatriureticpeptide,pro(probnp)_last": 4339,
    "eos_min": 189,
    "mchc_min": 148,
    "neutrophils_max": 724,
    "b-typenatriureticpeptide,pro(probnp)_min": 3706,
    "hco3calculated,venous(poc)_max": 411,
    "mch_median": 582,
    "nrbcabsolute_last": 38,
    "egfr(nonafricanamerican)_median": 305,
    "lipase_median": 965,
    "calcium_min": 116,
    "temp_last": 140,
    "esi": 2,
    "meds_antifungals": 0,
    "monocytes_max": 297,
    "meds_eentpreps": 0,
    "cc_others": 0,
    "triage_vital_o2": 106,
    "prothrombintime_max": 809,
    "mch_max": 328,
    "bloodua_npos": 0,
    "meds_blood": 0,
    "acetonebld_median": 117,
    "spo2_min": 94,
    "monosabs_last": 562,
    "spo2_median": 57,
    "globulin_min": 82,
    "bun/creatratio_min": 606,
    "bloodculture,routine_count": 0,
    "meds_hormones": 0,
    "urineculture,routine_last": 0,
    "mchc_max": 156,
    "proteinua_count": 0,
    "lymphs_max": 671,
    "immaturegrans(abs)_last": 30,
    "meds_biologicals": 0,
    "mpv_max": 148,
    "poctroponini._max": 47,
    "previousdispo": 6,
    "calcium_median": 177,
    "meds_smokingdeterrents": 0,
    "meds_antihistamineanddecongestantcombination": 0,
    "bilirubindirect_max": 563,
    "resp_max": 21,
    "basos_max": 50,
    "immaturegranulocytes_last": 114,
    "meds_herbals": 0,
    "nrbcabsolute_min": 24,
    "egfr(aframer)_median": 331,
    "lactate,poc_median": 272,
    "triage_vital_sbp": 612,
    "mch_min": 310,
    "tsh_min": 1712,
    "lactate,poc_max": 178,
    "insurance_status": 1,
    "meds_antihyperglycemics": 0,
    "temp_median": 245,
    "nitriteua_count": 0,
    "hco3calculated,venous(poc)_median": 649,
    "magnesium_median": 79,
    "meds_antiparkinsondrugs": 0,
    "triage_vital_hr": 485,
    "calcium_last": 123,
    "bilirubindirect_last": 588,
    "pregtestur_npos": 0,
    "sodium_median": 115,
    "ptt_median": 927,
    "aniongap_median": 90,
    "creatinine_last": 1078,
    "albumin_median": 100,
    "troponint_last": 171,
    "rdw_median": 384,
    "sbp_max": 155,
    "eos_median": 330,
    "meds_anti-obesitydrugs": 0,
    "dbp_median": 219,
    "immaturegrans(abs)_median": 36,
    "triage_vital_temp": 255,
    "aspartateaminotransferase(ast)_median": 907,
    "tsh_median": 2459,
    "hematocrit_median": 893,
    "d-dimer_max": 1040,
    "meds_musclerelaxants": 0,
    "hematocrit_max": 507,
    "inr_max": 795,
    "mcv_median": 1073,
    "ptt_last": 635,
    "anc(absneutrophilcount)_median": 677,
    "platelets_median": 1478,
    "pulse_min": 69,
    "tsh_max": 1757,
    "bilirubindirect_min": 482,
    "meds_gastrointestinal": 1,
    "pulse_median": 261,
    "meds_antiarthritics": 0,
    "wbc_min": 500,
    "lactate,poc_min": 172,
    "urineculture,routine_npos": 0,
    "arrivalhour_bin": 1,
    "dbp_max": 94,
    "mpv_last": 148,
    "meds_analgesicandantihistaminecombination": 0,
    "meds_investigational": 0,
    "calcium_max": 119,
    "pulse_last": 80,
    "poccreatinine_max": 191,
    "pulse_max": 97,
    "co2calculated,venous(poc)_median": 119,
    "meds_elect/caloric/h2o": 2,
    "co2,poc_median": 102,
    "basosabs_max": 126,
    "pocionizedcalcium_last": 66,
    "prothrombintime_last": 802,
    "mcv_last": 639,
    "pocph_last": 119,
    "race": 7,
    "prothrombintime_min": 613,
    "meds_autonomicdrugs": 0,
    "pco2,venous(poc)_median": 222,
    "rbc_min": 302,
    "monosabs_median": 687,
    "ekg_count": 0,
    "triage_vital_dbp": 453,
    "absolutelymphocytecount_min": 215,
    "meds_antihistamines": 0,
    "bun/creatratio_last": 685,
    "troponini(poc)_last": 383,
    "otherct_count": 0,
    "eosinoabs_median": 56,
    "tsh_last": 1795,
    "meds_psychotherapeuticdrugs": 0,
    "n_edvisits": 0,
    "inr_min": 599,
    "hemoglobin_median": 329,
    "creatinine_max": 850,
    "meds_analgesics": 1,
    "mcv_min": 579,
    "poccreatinine_min": 175,
    "nrbc_last": 165,
    "eos_max": 228,
    "troponini(poc)_median": 498,
    "pocph_max": 117,
    "anc(absneutrophilcount)_max": 456,
    "pco2(poc)_median": 222,
    "rbc_max": 276,
    "albumin_min": 55,
    "n_surgeries": 2,
    "troponint_median": 235,
    "nitriteua_npos": 0,
    "d-dimer_median": 1238,
    "pocph_min": 120,
    "troponint_min": 165,
    "bun/creatratio_median": 1152,
    "pocsodium_median": 124,
    "meds_antiinfectives": 0,
    "ph,venous(poc)_last": 94,
    "co2_max": 385,
    "calculatedo2saturation(poc)_median": 215,
    "phosphorus_median": 215,
    "co2_median": 660,
    "pocglucose_median": 1070,
    "absolutelymphocytecount_max": 240,
    "baseexcess(poc)_median": 117,
    "troponint_max": 176,
    "ph,venous(poc)_min": 85,
    "calculatedhco3(poc)i_min": 470,
    "ph,venous(poc)_max": 86,
    "nrbcabsolute_median": 46,
    "glucoseua_count": 0,
    "pocpotassium_last": 72,
    "ptt_min": 563,
    "hematocrit_min": 510,
    "egfr_median": 214,
    "hemoglobin_min": 188,
    "ptt_max": 646,
    "bun/creatratio_max": 680,
    "otherxr_count": 0,
    "calculatedhco3(poc)i_max": 488,
    "rdw_min": 206,
    "mpv_median": 259,
    "employstatus": 2,
    "absolutelymphocytecount_median": 363,
    "troponini(poc)_min": 330,
    "monocytes_last": 301,
    "poccreatinine_median": 332,
    "bilirubintotal_max": 969,
    "lactate,poc_last": 177,
    "glucose_median": 1229,
    "immaturegranulocytes_median": 152,
    "nrbcabsolute_max": 35,
    "inr_last": 781,
    "ketonesua_count": 0,
    "pocglucose_max": 1033,
    "pocglucose_min": 1059,
    "resp_median": 72,
    "meds_contraceptives": 0,
    "n_admissions": 0,
    "alanineaminotransferase(alt)_median": 801,
    "chloride_median": 123,
    "mchc_median": 256,
    "hematocrit_last": 523,
    "arrivalmonth": 6,
    "eosinoabs_last": 41,
    "wbc/hpf_median": 1162,
    "ketonesua_npos": 0,
    "rdw_max": 231,
    "neutrophils_last": 771,
    "neutrophils_median": 1325,
    "monocytes_median": 460,
    "d-dimer_last": 935,
    "echo_count": 0,
    "meds_antineoplastics": 0,
    "meds_cnsdrugs": 0,
    "basosabs_min": 122,
    "glucose,meter_median": 987,
    "rbc_median": 480,
    "rdw_last": 235,
    "bilirubintotal_last": 1055,
    "pochematocrit_median": 133,
    "monosabs_min": 538,
    "meds_thyroidpreps": 0,
    "dbp_last": 74,
    "otherimg_count": 0,
    "meds_cough/coldpreparations": 0,
    "resp_min": 15,
    "poccreatinine_last": 190,
    "hemoglobin_max": 186,
    "albumin_max": 55,
    "proteinua_npos": 0,
    "bilirubindirect_median": 812,
    "pocglucose_last": 1206,
    "poctroponini._min": 47,
    "phosphorus_min": 131,
    "b-typenatriureticpeptide,pro(probnp)_median": 4449,
    "nrbc_min": 107,
    "pmh_others": 0,
    "creatinine_min": 742,
    "basos_median": 77,
    "glucoseua_npos": 0,
    "cxr_count": 0,
    "prothrombintime_median": 1062,
    "bloodua_count": 0,
    "phosphorus_last": 137,
    "nrbc_median": 199,
    "meds_vitamins": 1,
    "maritalstatus": 7,
    "meds_antiinfectives/miscellaneous": 0,
    "immaturegranulocytes_max": 112,
    "magnesium_min": 49,
    "potassium_min": 78,
    "meds_cardiacdrugs": 0,
    "nrbc_max": 145,
    "absolutelymphocytecount_last": 271,
    "pocpotassium_max": 72,
    "creatinine_median": 1413,
    "basos_min": 38,
    "meds_antiplateletdrugs": 0,
    "calculatedhco3(poc)i_last": 509,
    "globulin_last": 89,
    "bun_median": 294,
    "triage_vital_rr": 146,
    "proteintotal_max": 99,
    "proteintotal_last": 102,
    "basosabs_last": 128,
    "baseexcess,venous(poc)_median": 132,
    "bilirubintotal_median": 1408,
    "lymphs_last": 687,
    "meds_antiallergy": 0,
    "lymphs_min": 640,
    "co2_last": 399,
    "resp_last": 17,
    "meds_pre-natalvitamins": 0,
    "meds_anticoagulants": 0,
    "anc(absneutrophilcount)_min": 371,
    "globulin_max": 87,
    "immaturegranulocytes_min": 98,
    "eosinoabs_max": 40,
    "meds_miscellaneousmedicalsupplies,devices,non-drug": 0,
    "meds_skinpreps": 0,
    "cktotal_median": 1824,
    "pocpotassium_median": 136,
    "meds_antibiotics": 1,
    "bilirubintotal_min": 765,
    "hco3calculated,venous(poc)_last": 444,
    "inr_median": 1059,
    "basos_last": 53,
    "meds_cardiovascular": 0,
    "proteintotal_median": 167,
    "potassium_median": 130,
    "pregtestur_count": 0,
    "wbc_max": 592,
    "magnesium_last": 50,
    "meds_anesthetics": 0,
    "mch_last": 341,
    "eos_last": 240,
    "monosabs_max": 550,
    "meds_antivirals": 0,
    "potassium_max": 83,
    "leukocytesua_npos": 0,
    "b-typenatriureticpeptide,pro(probnp)_max": 3861,
    "bloodculture,routine_npos": 0,
    "meds_antidotes": 0,
    "immaturegrans(abs)_max": 30,
    "dbp_min": 61,
    "sbp_last": 130,
    "othematldx": 0,
    "cc_motorcyclecrash": 0,
    "ms": 0,
    "peritonitis": 0,
    "cc_unresponsive": 0,
    "hepatitis": 0,
    "complicdevi": 0,
    "biliarydx": 1,
    "ecodesplaceofoccurrence": 0,
    "conduction": 0,
    "cc_sicklecellpain": 0,
    "pulmhartdx": 0,
    "uteruscancr": 0,
    "cc_alcoholintoxication": 0,
    "cc_legswelling": 0,
    "othskindx": 0,
    "cc_breathingdifficulty": 0,
    "cc_ingestion": 0,
    "cc_breathingproblem": 0,
    "intobstruct": 0,
    "skinmelanom": 0,
    "cc_nausea": 0,
    "cc_rectalpain": 0,
    "leukocytesua_last": 0,
    "cc_feverimmunocompromised": 0,
    "goutotcrys": 0,
    "chrkidneydisease": 0,
    "uti": 0,
    "cc_rapidheartrate": 0,
    "burns": 0,
    "cc_chills": 0,
    "cc_epistaxis": 0,
    "htn": 1,
    "anemia": 0,
    "cc_weakness": 0,
    "encephalitis": 0,
    "cc_psychiatricevaluation": 0,
    "cc_nearsyncope": 0,
    "otbnignneo": 0,
    "mooddisorders": 0,
    "cc_tachycardia": 0,
    "ecodesotherspecifiednec": 0,
    "cc_headache-recurrentorknowndxmigraines": 0,
    "cc_urinarytractinfection": 0,
    "cc_fatigue": 0,
    "o2_device_median": 5,
    "cataract": 0,
    "esophcancer": 0,
    "cc_swallowedforeignbody": 0,
    "syncope": 0,
    "cc_trauma": 0,
    "substancerelateddisorders": 0,
    "coaghemrdx": 0,
    "gastritis": 0,
    "cc_flankpain": 0,
    "otherinjury": 0,
    "cc_anxiety": 0,
    "cc_abnormallab": 0,
    "fxarm": 0,
    "cc_overdose-accidental": 0,
    "otprimryca": 0,
    "ulceratcol": 0,
    "septicemiaexceptinlabor": 0,
    "cc_fulltrauma": 0,
    "cc_testiclepain": 0,
    "phlebitis": 0,
    "cc_extremityweakness": 0,
    "cc_cardiacarrest": 0,
    "pathologfx": 0,
    "nitriteua_last": 0,
    "cc_allergicreaction": 0,
    "ecodestransportnotmvt": 0,
    "cc_lossofconsciousness": 0,
    "cc_confusion": 0,
    "cc_jointswelling": 0,
    "rheumarth": 0,
    "cc_skinproblem": 0,
    "hodgkinsds": 0,
    "cc_vaginalbleeding": 0,
    "ecodesdrowningsubmersion": 0,
    "cc_urinaryretention": 0,
    "cc_neurologicproblem": 0,
    "cc_respiratorydistress": 0,
    "glucoseua_last": 0,
    "acutecvd": 0,
    "pleurisy": 0,
    "breastcancr": 0,
    "osteoporosis": 0,
    "cc_homicidal": 0,
    "cc_post-opproblem": 0,
    "perintjaund": 0,
    "opnwndhead": 0,
    "othcnsinfx": 0,
    "chfnonhp": 0,
    "schizophreniaandotherpsychoticdisorde": 0,
    "cc_hallucinations": 0,
    "birthasphyx": 0,
    "superficinj": 0,
    "cc_woundinfection": 0,
    "cervixcancr": 0,
    "hivinfectn": 0,
    "otaftercare": 0,
    "immunitydx": 0,
    "maintchemr": 0,
    "othergidx": 0,
    "giperitcan": 0,
    "cc_depression": 0,
    "nephritis": 0,
    "comabrndmg": 0,
    "chestpain": 0,
    "nervcongan": 0,
    "brnchlngca": 0,
    "otdxstomch": 0,
    "otnutritdx": 0,
    "cc_fingerswelling": 0,
    "cc_rectalbleeding": 0,
    "cc_other": 0,
    "cc_ribpain": 0,
    "cc_seizure-newonset": 0,
    "retinaldx": 0,
    "ecodesmachinery": 0,
    "fxhip": 0,
    "deliriumdementiaamnesticothercognitiv": 0,
    "cc_suicidal": 0,
    "peripathero": 0,
    "cc_backpain": 0,
    "cc_psychoticsymptoms": 0,
    "cc_giproblem": 0,
    "urinstone": 0,
    "cc_syncope": 0,
    "aneurysm": 0,
    "developmentaldisorders": 0,
    "cc_dyspnea": 0,
    "influenza": 0,
    "cc_edema": 0,
    "cc_hypotension": 0,
    "gihemorrhag": 0,
    "cc_woundre-evaluation": 0,
    "otdxkidney": 0,
    "ulcerskin": 1,
    "cc_abdominalpain": 1,
    "cc_poisoning": 0,
    "gender": 0,
    "cc_drugproblem": 0,
    "cc_shortnessofbreath": 0,
    "cc_armswelling": 0,
    "shock": 0,
    "adltrespfl": 0,
    "mouthdx": 0,
    "cc_neckpain": 0,
    "cc_detoxevaluation": 0,
    "cc_groinpain": 0,
    "othbactinf": 0,
    "pregtestur_last": 0,
    "prostatecan": 0,
    "cc_alteredmentalstatus": 0,
    "cc_fall>65": 0,
    "giconganom": 0,
    "cc_panicattack": 0,
    "hemmorhoids": 0,
    "infmalegen": 0,
    "otendodsor": 0,
    "cc_fever-75yearsorolder": 0,
    "blindness": 0,
    "othinfectns": 0,
    "cc_medicalscreening": 0,
    "ecodesfall": 0,
    "liveribdca": 0,
    "fuo": 0,
    "otupprresp": 0,
    "cc_headinjury": 0,
    "o2_device_max": 0,
    "exameval": 0,
    "precereoccl": 0,
    "ecodesadverseeffectsofmedicaldrugs": 0,
    "pelvicobstr": 0,
    "cc_blurredvision": 0,
    "pancreascan": 0,
    "triage_vital_o2_device": 0,
    "acutemi": 0,
    "gasduoulcer": 0,
    "abdomhernia": 1,
    "tuberculosis": 0,
    "cc_bleeding/bruising": 0,
    "alcoholrelateddisorders": 0,
    "otdxbladdr": 0,
    "cc_footswelling": 0,
    "cc_strokealert": 0,
    "cc_chesttightness": 0,
    "skininfectn": 0,
    "mycoses": 0,
    "othereyedx": 0,
    "anxietydisorders": 0,
    "othliverdx": 0,
    "sicklecell": 0,
    "htncomplicn": 0,
    "testiscancr": 0,
    "nonepithca": 0,
    "cc_abdominaldistention": 0,
    "proteinua_last": 0,
    "cc_medicationproblem": 0,
    "varicosevn": 0,
    "osteoarthros": 0,
    "cc_pain": 1,
    "artembolism": 0,
    "esophgealdx": 0,
    "analrectal": 0,
    "cc_headache-newonsetornewsymptoms": 0,
    "urinyorgca": 0,
    "bonectcncr": 0,
    "rctmanusca": 0,
    "lang": 0,
    "cc_constipation": 0,
    "2ndarymalig": 0,
    "ecodessuffocation": 0,
    "cc_lethargy": 0,
    "neoplsmunsp": 0,
    "complicproc": 0,
    "lungexternl": 0,
    "thyroidcncr": 0,
    "cc_mass": 0,
    "cc_legpain": 0,
    "nutritdefic": 0,
    "ketonesua_last": 0,
    "otcirculdx": 0,
    "nauseavomit": 0,
    "cc_maleguproblem": 0,
    "bladdercncr": 0,
    "glaucoma": 0,
    "cc_irregularheartbeat": 0,
    "cc_generalizedbodyaches": 0,
    "crushinjury": 0,
    "hrtvalvedx": 0,
    "otacqdefor": 0,
    "cc_armpain": 0,
    "cc_dizziness": 0,
    "cc_elevatedbloodsugar-symptomatic": 0,
    "acqfootdef": 0,
    "cc_footpain": 0,
    "cc_gibleeding": 0,
    "otinflskin": 0,
    "cc_hemoptysis": 0,
    "cc_woundcheck": 0,
    "liveborn": 0,
    "cc_cough": 0,
    "cc_wheezing": 0,
    "paralysis": 0,
    "bloodculture,routine_last": 0,
    "cc_fall": 0,
    "o2_device_min": 0,
    "fxskullfac": 0,
    "othercvd": 0,
    "cc_asthma": 0,
    "cc_oralswelling": 0,
    "cc_agitation": 0,
    "cc_numbness": 0,
    "cc_decreasedbloodsugar-symptomatic": 0,
    "otheredcns": 0,
    "bph": 0,
    "whtblooddx": 0,
    "nonhodglym": 0,
    "rehab": 0,
    "screeningandhistoryofmentalhealthan": 0,
    "cc_seizures": 0,
    "thyroiddsor": 0,
    "cc_palpitations": 0,
    "diverticulos": 0,
    "leukemias": 0,
    "cc_drug/alcoholassessment": 0,
    "cc_hematuria": 0,
    "ecodesadverseeffectsofmedicalcare": 0,
    "maligneopls": 1,
    "cc_withdrawal-alcohol": 0,
    "acutphanm": 0,
    "hyperlipidem": 0,
    "coronathero": 0,
    "cc_modifiedtrauma": 0,
    "bronchitis": 0,
    "cc_fever": 0,
    "unclassified": 0,
    "tia": 0,
    "cc_handpain": 0,
    "cc_abdominalcramping": 0,
    "fatigue": 0,
    "cc_elevatedbloodsugar-nosymptoms": 0,
    "cc_hippain": 0,
    "othlowresp": 0,
    "backproblem": 1,
    "menopausldx": 0,
    "lateeffcvd": 0,
    "otrespirca": 0,
    "cc_alcoholproblem": 0,
    "othergudx": 0,
    "otbonedx": 0,
    "acrenlfail": 0,
    "pancreasdx": 0,
    "othveindx": 0,
    "eyeinfectn": 0,
    "kidnyrnlca": 1,
    "femgenitca": 0,
    "cardiaarrst": 0,
    "pneumonia": 0,
    "cc_chestpain": 0,
    "guconganom": 0,
    "cc_emesis": 0,
    "parkinsons": 0,
    "cc_medicalproblem": 0,
    "cc_leginjury": 0,
    "bloodua_last": 0,
    "prolapse": 0,
    "cardiacanom": 0,
    "cc_overdose-intentional": 0,
    "othfracture": 0,
    "opnwndextr": 0,
    "malgenitca": 0,
    "o2_device_last": 0,
    "othheartdx": 0,
    "cc_cellulitis": 0,
    "ovarycancer": 0,
    "respdistres": 0,
    "cc_hypertension": 0,
    "fxleg": 0,
    "fluidelcdx": 0,
    "hdnckcancr": 0,
    "cc_fever-9weeksto74years": 0,
    "miscellaneousmentalhealthdisorders": 0,
    "cc_dehydration": 0,
    "sle": 0,
    "cc_headachere-evaluation": 0,
    "cc_jawpain": 0,
    "lymphenlarg": 0,
    "multmyeloma": 0,
    "asppneumon": 0,
    "intestinfct": 0,
    "gangrene": 0,
    "meningitis": 0,
    "othmalegen": 0,
    "cc_addictionproblem": 0,
    "gastroent": 0,
    "dizziness": 0,
    "diabmelnoc": 0,
    "spincorinj": 0,
    "cc_follow-upcellulitis": 0,
    "brainnscan": 0,
    "othnervdx": 0,
    "poisnotmed": 0,
    "cc_hyperglycemia": 0,
    "infectarth": 0,
    "dysrhythmia": 0,
    "cc_dysuria": 0,
    "cc_abscess": 0,
    "cc_influenza": 0,
    "othereardx": 0,
    "otconntiss": 0,
    "cc_femaleguproblem": 0,
    "otconganom": 0,
    "septicemia": 0,
    "abdomnlpain": 0,
    "carditis": 0,
    "immunizscrn": 0,
    "stomchcancr": 0,
    "diabmelwcm": 0,
    "copd": 0,
    "epilepsycnv": 0,
    "cc_diarrhea": 0,
    "teethdx": 0,
    "otjointdx": 1,
    "coloncancer": 0,
    "umbilcord": 0,
    "cc_urinaryfrequency": 0,
    "cysticfibro": 0,
    "cc_multiplefalls": 0,
    "cc_seizure-priorhxof": 0,
    "suicideandintentionalselfinflictedin": 0,
    "cc_epigastricpain": 0,
    "cc_facialswelling": 0,
}
"""
meta_data = {
    "meds_diagnostic": 0,
    "meds_unclassifieddrugproducts": 0,
    "neutrophils_min": 748,
    "temp_max": 101,
    "anc(absneutrophilcount)_last": 457,
    "urineculture,routine_count": 0,
    "d-dimer_min": 1017,
    "wbc_median": 885,
    "calculatedhco3(poc)i_median": 792,
    "po2(poc)_median": 324,
    "arrivalday": 5,
    "mpv_min": 141,
    "pocbun_median": 291,
    "meds_immunosuppressants": 0,
    "meds_diuretics": 0,
    "pocionizedcalcium_median": 99,
    "ph,venous(poc)_median": 135,
    "sbp_median": 38,
    "potassium_last": 82,
    "albumin_last": 56,
    "rbc_last": 322,
    "poctroponini._last": 42,
    "temp_min": 111,
    "mchc_last": 157,
    "religion": 1,
    "rbc/hpf_median": 1133,
    "co2_min": 355,
    "magnesium_max": 51,
    "pocionizedcalcium_min": 64,
    "alkphos_median": 1105,
    "pocionizedcalcium_max": 64,
    "meds_sedative/hypnotics": 0,
    "troponini(poc)_max": 403,
    "arrivalmode": 0,
    "meds_antiasthmatics": 0,
    "basosabs_median": 185,
    "otherus_count": 0,
    "pocph_median": 272,
    "leukocytesua_count": 0,
    "meds_colonystimulatingfactors": 0,
    "ethnicity": 1,
    "o2satcalculated,venous(poc)_median": 268,
    "age": 22,
    "eosinoabs_min": 36,
    "wbc_last": 614,
    "mri_count": 0,
    "headct_count": 0,
    "globulin_median": 149,
    "poctroponini._median": 54,
    "calculatedco2(poc)_median": 99,
    "hemoglobin_last": 191,
    "lymphs_median": 1189,
    "immaturegrans(abs)_min": 26,
    "proteintotal_min": 99,
    "phosphorus_max": 138,
    "hco3calculated,venous(poc)_min": 401,
    "mcv_max": 598,
    "sbp_min": 119,
    "spo2_max": 99,
    "po2,venous(poc)_median": 283,
    "pocpotassium_min": 72,
    "monocytes_min": 254,
    "b-typenatriureticpeptide,pro(probnp)_last": 4339,
    "eos_min": 189,
    "mchc_min": 148,
    "neutrophils_max": 724,
    "b-typenatriureticpeptide,pro(probnp)_min": 3706,
    "hco3calculated,venous(poc)_max": 411,
    "mch_median": 582,
    "nrbcabsolute_last": 38,
    "egfr(nonafricanamerican)_median": 305,
    "lipase_median": 965,
    "calcium_min": 116,
    "temp_last": 110,
    "esi": 3,
    "meds_antifungals": 0,
    "monocytes_max": 297,
    "meds_eentpreps": 0,
    "cc_others": 1,
    "triage_vital_o2": 98,
    "prothrombintime_max": 809,
    "mch_max": 328,
    "bloodua_npos": 0,
    "meds_blood": 0,
    "acetonebld_median": 117,
    "spo2_min": 99,
    "monosabs_last": 562,
    "spo2_median": 56,
    "globulin_min": 82,
    "bun/creatratio_min": 606,
    "bloodculture,routine_count": 0,
    "meds_hormones": 0,
    "urineculture,routine_last": 0,
    "mchc_max": 156,
    "proteinua_count": 0,
    "lymphs_max": 671,
    "immaturegrans(abs)_last": 30,
    "meds_biologicals": 0,
    "mpv_max": 148,
    "poctroponini._max": 47,
    "previousdispo": 2,
    "calcium_median": 177,
    "meds_smokingdeterrents": 0,
    "meds_antihistamineanddecongestantcombination": 0,
    "bilirubindirect_max": 563,
    "resp_max": 16,
    "basos_max": 50,
    "immaturegranulocytes_last": 114,
    "meds_herbals": 0,
    "nrbcabsolute_min": 24,
    "egfr(aframer)_median": 331,
    "lactate,poc_median": 272,
    "triage_vital_sbp": 158,
    "mch_min": 310,
    "tsh_min": 1712,
    "lactate,poc_max": 178,
    "insurance_status": 0,
    "meds_antihyperglycemics": 0,
    "temp_median": 185,
    "nitriteua_count": 0,
    "hco3calculated,venous(poc)_median": 649,
    "magnesium_median": 79,
    "meds_antiparkinsondrugs": 0,
    "triage_vital_hr": 391,
    "calcium_last": 123,
    "bilirubindirect_last": 588,
    "pregtestur_npos": 0,
    "sodium_median": 115,
    "ptt_median": 927,
    "aniongap_median": 90,
    "creatinine_last": 1078,
    "albumin_median": 100,
    "troponint_last": 171,
    "rdw_median": 384,
    "sbp_max": 119,
    "eos_median": 330,
    "meds_anti-obesitydrugs": 0,
    "dbp_median": 187,
    "immaturegrans(abs)_median": 36,
    "triage_vital_temp": 199,
    "aspartateaminotransferase(ast)_median": 907,
    "tsh_median": 2459,
    "hematocrit_median": 893,
    "d-dimer_max": 1040,
    "meds_musclerelaxants": 0,
    "hematocrit_max": 507,
    "inr_max": 795,
    "mcv_median": 1073,
    "ptt_last": 635,
    "anc(absneutrophilcount)_median": 677,
    "platelets_median": 1478,
    "pulse_min": 58,
    "tsh_max": 1757,
    "bilirubindirect_min": 482,
    "meds_gastrointestinal": 0,
    "pulse_median": 177,
    "meds_antiarthritics": 0,
    "wbc_min": 500,
    "lactate,poc_min": 172,
    "urineculture,routine_npos": 0,
    "arrivalhour_bin": 5,
    "dbp_max": 84,
    "mpv_last": 148,
    "meds_analgesicandantihistaminecombination": 0,
    "meds_investigational": 0,
    "calcium_max": 119,
    "pulse_last": 58,
    "poccreatinine_max": 191,
    "pulse_max": 58,
    "co2calculated,venous(poc)_median": 119,
    "meds_elect/caloric/h2o": 0,
    "co2,poc_median": 102,
    "basosabs_max": 126,
    "pocionizedcalcium_last": 66,
    "prothrombintime_last": 802,
    "mcv_last": 639,
    "pocph_last": 119,
    "race": 7,
    "prothrombintime_min": 613,
    "meds_autonomicdrugs": 0,
    "pco2,venous(poc)_median": 222,
    "rbc_min": 302,
    "monosabs_median": 687,
    "ekg_count": 0,
    "triage_vital_dbp": 225,
    "absolutelymphocytecount_min": 215,
    "meds_antihistamines": 0,
    "bun/creatratio_last": 685,
    "troponini(poc)_last": 383,
    "otherct_count": 0,
    "eosinoabs_median": 56,
    "tsh_last": 1795,
    "meds_psychotherapeuticdrugs": 0,
    "n_edvisits": 1,
    "inr_min": 599,
    "hemoglobin_median": 329,
    "creatinine_max": 850,
    "meds_analgesics": 0,
    "mcv_min": 579,
    "poccreatinine_min": 175,
    "nrbc_last": 165,
    "eos_max": 228,
    "troponini(poc)_median": 498,
    "pocph_max": 117,
    "anc(absneutrophilcount)_max": 456,
    "pco2(poc)_median": 222,
    "rbc_max": 276,
    "albumin_min": 55,
    "n_surgeries": 0,
    "troponint_median": 235,
    "nitriteua_npos": 0,
    "d-dimer_median": 1238,
    "pocph_min": 120,
    "troponint_min": 165,
    "bun/creatratio_median": 1152,
    "pocsodium_median": 124,
    "meds_antiinfectives": 0,
    "ph,venous(poc)_last": 94,
    "co2_max": 385,
    "calculatedo2saturation(poc)_median": 215,
    "phosphorus_median": 215,
    "co2_median": 660,
    "pocglucose_median": 1070,
    "absolutelymphocytecount_max": 240,
    "baseexcess(poc)_median": 117,
    "troponint_max": 176,
    "ph,venous(poc)_min": 85,
    "calculatedhco3(poc)i_min": 470,
    "ph,venous(poc)_max": 86,
    "nrbcabsolute_median": 46,
    "glucoseua_count": 0,
    "pocpotassium_last": 72,
    "ptt_min": 563,
    "hematocrit_min": 510,
    "egfr_median": 214,
    "hemoglobin_min": 188,
    "ptt_max": 646,
    "bun/creatratio_max": 680,
    "otherxr_count": 0,
    "calculatedhco3(poc)i_max": 488,
    "rdw_min": 206,
    "mpv_median": 259,
    "employstatus": 6,
    "absolutelymphocytecount_median": 363,
    "troponini(poc)_min": 330,
    "monocytes_last": 301,
    "poccreatinine_median": 332,
    "bilirubintotal_max": 969,
    "lactate,poc_last": 177,
    "glucose_median": 1229,
    "immaturegranulocytes_median": 152,
    "nrbcabsolute_max": 35,
    "inr_last": 781,
    "ketonesua_count": 0,
    "pocglucose_max": 1033,
    "pocglucose_min": 1059,
    "resp_median": 12,
    "meds_contraceptives": 0,
    "n_admissions": 0,
    "alanineaminotransferase(alt)_median": 801,
    "chloride_median": 123,
    "mchc_median": 256,
    "hematocrit_last": 523,
    "arrivalmonth": 11,
    "eosinoabs_last": 41,
    "wbc/hpf_median": 1162,
    "ketonesua_npos": 0,
    "rdw_max": 231,
    "neutrophils_last": 771,
    "neutrophils_median": 1325,
    "monocytes_median": 460,
    "d-dimer_last": 935,
    "echo_count": 0,
    "meds_antineoplastics": 0,
    "meds_cnsdrugs": 0,
    "basosabs_min": 122,
    "glucose,meter_median": 987,
    "rbc_median": 480,
    "rdw_last": 235,
    "bilirubintotal_last": 1055,
    "pochematocrit_median": 133,
    "monosabs_min": 538,
    "meds_thyroidpreps": 0,
    "dbp_last": 84,
    "otherimg_count": 0,
    "meds_cough/coldpreparations": 0,
    "resp_min": 16,
    "poccreatinine_last": 190,
    "hemoglobin_max": 186,
    "albumin_max": 55,
    "proteinua_npos": 0,
    "bilirubindirect_median": 812,
    "pocglucose_last": 1206,
    "poctroponini._min": 47,
    "phosphorus_min": 131,
    "b-typenatriureticpeptide,pro(probnp)_median": 4449,
    "nrbc_min": 107,
    "pmh_others": 0,
    "creatinine_min": 742,
    "basos_median": 77,
    "glucoseua_npos": 0,
    "cxr_count": 0,
    "prothrombintime_median": 1062,
    "bloodua_count": 0,
    "phosphorus_last": 137,
    "nrbc_median": 199,
    "meds_vitamins": 0,
    "maritalstatus": 7,
    "meds_antiinfectives/miscellaneous": 0,
    "immaturegranulocytes_max": 112,
    "magnesium_min": 49,
    "potassium_min": 78,
    "meds_cardiacdrugs": 0,
    "nrbc_max": 145,
    "absolutelymphocytecount_last": 271,
    "pocpotassium_max": 72,
    "creatinine_median": 1413,
    "basos_min": 38,
    "meds_antiplateletdrugs": 0,
    "calculatedhco3(poc)i_last": 509,
    "globulin_last": 89,
    "bun_median": 294,
    "triage_vital_rr": 13,
    "proteintotal_max": 99,
    "proteintotal_last": 102,
    "basosabs_last": 128,
    "baseexcess,venous(poc)_median": 132,
    "bilirubintotal_median": 1408,
    "lymphs_last": 687,
    "meds_antiallergy": 0,
    "lymphs_min": 640,
    "co2_last": 399,
    "resp_last": 16,
    "meds_pre-natalvitamins": 0,
    "meds_anticoagulants": 0,
    "anc(absneutrophilcount)_min": 371,
    "globulin_max": 87,
    "immaturegranulocytes_min": 98,
    "eosinoabs_max": 40,
    "meds_miscellaneousmedicalsupplies,devices,non-drug": 0,
    "meds_skinpreps": 0,
    "cktotal_median": 1824,
    "pocpotassium_median": 136,
    "meds_antibiotics": 0,
    "bilirubintotal_min": 765,
    "hco3calculated,venous(poc)_last": 444,
    "inr_median": 1059,
    "basos_last": 53,
    "meds_cardiovascular": 0,
    "proteintotal_median": 167,
    "potassium_median": 130,
    "pregtestur_count": 0,
    "wbc_max": 592,
    "magnesium_last": 50,
    "meds_anesthetics": 0,
    "mch_last": 341,
    "eos_last": 240,
    "monosabs_max": 550,
    "meds_antivirals": 0,
    "potassium_max": 83,
    "leukocytesua_npos": 0,
    "b-typenatriureticpeptide,pro(probnp)_max": 3861,
    "bloodculture,routine_npos": 0,
    "meds_antidotes": 0,
    "immaturegrans(abs)_max": 30,
    "dbp_min": 84,
    "sbp_last": 119,
    "othematldx": 0,
    "cc_motorcyclecrash": 0,
    "ms": 0,
    "peritonitis": 0,
    "cc_unresponsive": 0,
    "hepatitis": 0,
    "complicdevi": 0,
    "biliarydx": 0,
    "ecodesplaceofoccurrence": 0,
    "conduction": 0,
    "cc_sicklecellpain": 0,
    "pulmhartdx": 0,
    "uteruscancr": 0,
    "cc_alcoholintoxication": 0,
    "cc_legswelling": 0,
    "othskindx": 0,
    "cc_breathingdifficulty": 0,
    "cc_ingestion": 0,
    "cc_breathingproblem": 0,
    "intobstruct": 0,
    "skinmelanom": 0,
    "cc_nausea": 0,
    "cc_rectalpain": 0,
    "leukocytesua_last": 0,
    "cc_feverimmunocompromised": 0,
    "goutotcrys": 0,
    "chrkidneydisease": 0,
    "uti": 0,
    "cc_rapidheartrate": 0,
    "burns": 0,
    "cc_chills": 0,
    "cc_epistaxis": 0,
    "htn": 0,
    "anemia": 0,
    "cc_weakness": 0,
    "encephalitis": 0,
    "cc_psychiatricevaluation": 0,
    "cc_nearsyncope": 0,
    "otbnignneo": 0,
    "mooddisorders": 0,
    "cc_tachycardia": 0,
    "ecodesotherspecifiednec": 0,
    "cc_headache-recurrentorknowndxmigraines": 0,
    "cc_urinarytractinfection": 0,
    "cc_fatigue": 0,
    "o2_device_median": 0,
    "cataract": 0,
    "esophcancer": 0,
    "cc_swallowedforeignbody": 0,
    "syncope": 0,
    "cc_trauma": 0,
    "substancerelateddisorders": 0,
    "coaghemrdx": 0,
    "gastritis": 0,
    "cc_flankpain": 0,
    "otherinjury": 0,
    "cc_anxiety": 0,
    "cc_abnormallab": 0,
    "fxarm": 0,
    "cc_overdose-accidental": 0,
    "otprimryca": 0,
    "ulceratcol": 0,
    "septicemiaexceptinlabor": 0,
    "cc_fulltrauma": 0,
    "cc_testiclepain": 0,
    "phlebitis": 0,
    "cc_extremityweakness": 0,
    "cc_cardiacarrest": 0,
    "pathologfx": 0,
    "nitriteua_last": 0,
    "cc_allergicreaction": 0,
    "ecodestransportnotmvt": 0,
    "cc_lossofconsciousness": 0,
    "cc_confusion": 0,
    "cc_jointswelling": 0,
    "rheumarth": 0,
    "cc_skinproblem": 0,
    "hodgkinsds": 0,
    "cc_vaginalbleeding": 0,
    "ecodesdrowningsubmersion": 0,
    "cc_urinaryretention": 0,
    "cc_neurologicproblem": 0,
    "cc_respiratorydistress": 0,
    "glucoseua_last": 0,
    "acutecvd": 0,
    "pleurisy": 0,
    "breastcancr": 0,
    "osteoporosis": 0,
    "cc_homicidal": 0,
    "cc_post-opproblem": 0,
    "perintjaund": 0,
    "opnwndhead": 0,
    "othcnsinfx": 0,
    "chfnonhp": 0,
    "schizophreniaandotherpsychoticdisorde": 0,
    "cc_hallucinations": 0,
    "birthasphyx": 0,
    "superficinj": 0,
    "cc_woundinfection": 0,
    "cervixcancr": 0,
    "hivinfectn": 0,
    "otaftercare": 0,
    "immunitydx": 0,
    "maintchemr": 0,
    "othergidx": 0,
    "giperitcan": 0,
    "cc_depression": 0,
    "nephritis": 0,
    "comabrndmg": 0,
    "chestpain": 0,
    "nervcongan": 0,
    "brnchlngca": 0,
    "otdxstomch": 0,
    "otnutritdx": 0,
    "cc_fingerswelling": 0,
    "cc_rectalbleeding": 0,
    "cc_other": 0,
    "cc_ribpain": 0,
    "cc_seizure-newonset": 0,
    "retinaldx": 0,
    "ecodesmachinery": 0,
    "fxhip": 0,
    "deliriumdementiaamnesticothercognitiv": 0,
    "cc_suicidal": 0,
    "peripathero": 0,
    "cc_backpain": 0,
    "cc_psychoticsymptoms": 0,
    "cc_giproblem": 0,
    "urinstone": 0,
    "cc_syncope": 0,
    "aneurysm": 0,
    "developmentaldisorders": 0,
    "cc_dyspnea": 0,
    "influenza": 0,
    "cc_edema": 0,
    "cc_hypotension": 0,
    "gihemorrhag": 0,
    "cc_woundre-evaluation": 0,
    "otdxkidney": 0,
    "ulcerskin": 0,
    "cc_abdominalpain": 0,
    "cc_poisoning": 0,
    "gender": 1,
    "cc_drugproblem": 0,
    "cc_shortnessofbreath": 0,
    "cc_armswelling": 0,
    "shock": 0,
    "adltrespfl": 0,
    "mouthdx": 0,
    "cc_neckpain": 0,
    "cc_detoxevaluation": 0,
    "cc_groinpain": 0,
    "othbactinf": 0,
    "pregtestur_last": 0,
    "prostatecan": 0,
    "cc_alteredmentalstatus": 0,
    "cc_fall>65": 0,
    "giconganom": 0,
    "cc_panicattack": 0,
    "hemmorhoids": 0,
    "infmalegen": 0,
    "otendodsor": 0,
    "cc_fever-75yearsorolder": 0,
    "blindness": 0,
    "othinfectns": 0,
    "cc_medicalscreening": 0,
    "ecodesfall": 0,
    "liveribdca": 0,
    "fuo": 0,
    "otupprresp": 0,
    "cc_headinjury": 0,
    "o2_device_max": 0,
    "exameval": 0,
    "precereoccl": 0,
    "ecodesadverseeffectsofmedicaldrugs": 0,
    "pelvicobstr": 0,
    "cc_blurredvision": 0,
    "pancreascan": 0,
    "triage_vital_o2_device": 0,
    "acutemi": 0,
    "gasduoulcer": 0,
    "abdomhernia": 0,
    "tuberculosis": 0,
    "cc_bleeding/bruising": 0,
    "alcoholrelateddisorders": 0,
    "otdxbladdr": 0,
    "cc_footswelling": 0,
    "cc_strokealert": 0,
    "cc_chesttightness": 0,
    "skininfectn": 0,
    "mycoses": 0,
    "othereyedx": 0,
    "anxietydisorders": 0,
    "othliverdx": 0,
    "sicklecell": 0,
    "htncomplicn": 0,
    "testiscancr": 0,
    "nonepithca": 0,
    "cc_abdominaldistention": 0,
    "proteinua_last": 0,
    "cc_medicationproblem": 0,
    "varicosevn": 0,
    "osteoarthros": 0,
    "cc_pain": 0,
    "artembolism": 0,
    "esophgealdx": 0,
    "analrectal": 0,
    "cc_headache-newonsetornewsymptoms": 0,
    "urinyorgca": 0,
    "bonectcncr": 0,
    "rctmanusca": 0,
    "lang": 0,
    "cc_constipation": 0,
    "2ndarymalig": 0,
    "ecodessuffocation": 0,
    "cc_lethargy": 0,
    "neoplsmunsp": 0,
    "complicproc": 0,
    "lungexternl": 0,
    "thyroidcncr": 0,
    "cc_mass": 0,
    "cc_legpain": 0,
    "nutritdefic": 0,
    "ketonesua_last": 0,
    "otcirculdx": 0,
    "nauseavomit": 0,
    "cc_maleguproblem": 0,
    "bladdercncr": 0,
    "glaucoma": 0,
    "cc_irregularheartbeat": 0,
    "cc_generalizedbodyaches": 0,
    "crushinjury": 0,
    "hrtvalvedx": 0,
    "otacqdefor": 0,
    "cc_armpain": 0,
    "cc_dizziness": 0,
    "cc_elevatedbloodsugar-symptomatic": 0,
    "acqfootdef": 0,
    "cc_footpain": 0,
    "cc_gibleeding": 0,
    "otinflskin": 0,
    "cc_hemoptysis": 0,
    "cc_woundcheck": 0,
    "liveborn": 0,
    "cc_cough": 0,
    "cc_wheezing": 0,
    "paralysis": 0,
    "bloodculture,routine_last": 0,
    "cc_fall": 0,
    "o2_device_min": 0,
    "fxskullfac": 0,
    "othercvd": 0,
    "cc_asthma": 0,
    "cc_oralswelling": 0,
    "cc_agitation": 0,
    "cc_numbness": 0,
    "cc_decreasedbloodsugar-symptomatic": 0,
    "otheredcns": 0,
    "bph": 0,
    "whtblooddx": 0,
    "nonhodglym": 0,
    "rehab": 0,
    "screeningandhistoryofmentalhealthan": 0,
    "cc_seizures": 0,
    "thyroiddsor": 0,
    "cc_palpitations": 0,
    "diverticulos": 0,
    "leukemias": 0,
    "cc_drug/alcoholassessment": 0,
    "cc_hematuria": 0,
    "ecodesadverseeffectsofmedicalcare": 0,
    "maligneopls": 0,
    "cc_withdrawal-alcohol": 0,
    "acutphanm": 0,
    "hyperlipidem": 0,
    "coronathero": 0,
    "cc_modifiedtrauma": 0,
    "bronchitis": 0,
    "cc_fever": 0,
    "unclassified": 0,
    "tia": 0,
    "cc_handpain": 0,
    "cc_abdominalcramping": 0,
    "fatigue": 0,
    "cc_elevatedbloodsugar-nosymptoms": 0,
    "cc_hippain": 0,
    "othlowresp": 0,
    "backproblem": 0,
    "menopausldx": 0,
    "lateeffcvd": 0,
    "otrespirca": 0,
    "cc_alcoholproblem": 0,
    "othergudx": 0,
    "otbonedx": 0,
    "acrenlfail": 0,
    "pancreasdx": 0,
    "othveindx": 0,
    "eyeinfectn": 0,
    "kidnyrnlca": 0,
    "femgenitca": 0,
    "cardiaarrst": 0,
    "pneumonia": 0,
    "cc_chestpain": 0,
    "guconganom": 0,
    "cc_emesis": 0,
    "parkinsons": 0,
    "cc_medicalproblem": 0,
    "cc_leginjury": 0,
    "bloodua_last": 0,
    "prolapse": 0,
    "cardiacanom": 0,
    "cc_overdose-intentional": 0,
    "othfracture": 0,
    "opnwndextr": 0,
    "malgenitca": 0,
    "o2_device_last": 0,
    "othheartdx": 0,
    "cc_cellulitis": 0,
    "ovarycancer": 0,
    "respdistres": 0,
    "cc_hypertension": 0,
    "fxleg": 0,
    "fluidelcdx": 0,
    "hdnckcancr": 0,
    "cc_fever-9weeksto74years": 0,
    "miscellaneousmentalhealthdisorders": 0,
    "cc_dehydration": 0,
    "sle": 0,
    "cc_headachere-evaluation": 0,
    "cc_jawpain": 0,
    "lymphenlarg": 0,
    "multmyeloma": 0,
    "asppneumon": 0,
    "intestinfct": 0,
    "gangrene": 0,
    "meningitis": 0,
    "othmalegen": 0,
    "cc_addictionproblem": 0,
    "gastroent": 0,
    "dizziness": 0,
    "diabmelnoc": 0,
    "spincorinj": 0,
    "cc_follow-upcellulitis": 0,
    "brainnscan": 0,
    "othnervdx": 0,
    "poisnotmed": 0,
    "cc_hyperglycemia": 0,
    "infectarth": 0,
    "dysrhythmia": 0,
    "cc_dysuria": 0,
    "cc_abscess": 0,
    "cc_influenza": 0,
    "othereardx": 0,
    "otconntiss": 0,
    "cc_femaleguproblem": 0,
    "otconganom": 0,
    "septicemia": 0,
    "abdomnlpain": 0,
    "carditis": 0,
    "immunizscrn": 0,
    "stomchcancr": 0,
    "diabmelwcm": 0,
    "copd": 0,
    "epilepsycnv": 0,
    "cc_diarrhea": 0,
    "teethdx": 0,
    "otjointdx": 0,
    "coloncancer": 0,
    "umbilcord": 0,
    "cc_urinaryfrequency": 0,
    "cysticfibro": 0,
    "cc_multiplefalls": 0,
    "cc_seizure-priorhxof": 0,
    "suicideandintentionalselfinflictedin": 0,
    "cc_epigastricpain": 0,
    "cc_facialswelling": 0,
}
"""
meta_data = json.dumps(meta_data)
meta_data = json.loads(meta_data)
#file_name = "xgb_reg.pkl"
file_name = "opt_rf_model"
xgb_model_loaded = pickle.load(open(file_name, "rb"))


class User(Resource):
    def get(self, name):
        for user in users:
            if name == user["name"]:
                return "Hospital Triage System", 200
        return "User not found", 404

    def post(self, name):
        json_data = request.get_json()

        updated_json = {
            "age": json_data["demographics"]["age"],
            "cc_cardiacarrest": 1
            if json_data["complaints"]["cardiac_arrest"] == "True"
            else 0,
            "triage_vital_hr": json_data["vitals"]["heart_rate"],
            "triage_vital_o2": json_data["vitals"]["oxygen_saturation"],
            "triage_vital_temp": json_data["vitals"]["temperature"],
            "esi": 3,
        }

        meta_data.update(updated_json)
        data_test = pd.DataFrame(meta_data, index=[0]).astype(int)
        predictions = xgb_model_loaded.predict(data_test)
        prob = xgb_model_loaded.predict_proba(data_test)
        return (
            "Patient can be {} with a {:.2f}% chance".format(
                "admitted" if predictions == 1 else "discharged",
                prob[0][int(predictions)] * 100,
            ),
            201,
        )


api.add_resource(User, "/user/<string:name>")

app.run(debug=True)
